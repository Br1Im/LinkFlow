======================================================================
H2H API TEST REPORT
======================================================================

ENDPOINT: https://liberty.top/api/h2h/order
METHOD: POST
MERCHANT ID: d5c17c6c-dc40-428a-80e5-2ca01af99f68

======================================================================
REQUEST DETAILS
======================================================================

Headers:
  Accept: application/json
  Access-Token: dtpf8uupsbhumevz4pz2jebrqzqmv62o
  Content-Type: application/json
  X-Max-Wait-Ms: 30000

Payload:
{
  "external_id": "TEST_H2H_001",
  "amount": 1000,
  "merchant_id": "d5c17c6c-dc40-428a-80e5-2ca01af99f68",
  "currency": "rub",
  "payment_detail_type": "card"
}

======================================================================
RESPONSE DETAILS
======================================================================

Status Code: 404
Response Body: File not found.

Response Headers:
  Date: Sat, 14 Feb 2026 10:26:26 GMT
  Content-Type: text/html; charset=UTF-8
  Transfer-Encoding: chunked
  Connection: keep-alive
  Server: cloudflare
  cf-cache-status: DYNAMIC
  vary: accept-encoding
  Content-Encoding: zstd
  CF-RAY: 9cdbde04fd985d80-FRA

======================================================================
PROBLEM ANALYSIS
======================================================================

ERROR: HTTP 404 - Endpoint not found

The H2H API endpoint returns 404 "File not found", which indicates:

1. The merchant account does not have access to H2H API
2. H2H API requires special activation from Liberty.top administrator
3. The endpoint /api/h2h/order is not available for this merchant

According to the official documentation at https://liberty.top/docs/1.0/overview,
the H2H API endpoint should be: POST /api/h2h/order

However, this endpoint is not accessible with the current merchant credentials.

======================================================================
VERIFICATION TESTS
======================================================================

Test 1: Basic API connectivity
  Endpoint: GET /api/currencies
  Result: SUCCESS (200 OK)
  Conclusion: API is accessible, token is valid

Test 2: Payment gateways
  Endpoint: GET /api/payment-gateways
  Result: SUCCESS (200 OK)
  Conclusion: Authentication works correctly

Test 3: Merchant API
  Endpoint: POST /api/merchant/order
  Result: SUCCESS (200 OK)
  Conclusion: Merchant API is available and working

Test 4: H2H API
  Endpoint: POST /api/h2h/order
  Result: FAILED (404 Not Found)
  Conclusion: H2H API is not available for this merchant

======================================================================
ALTERNATIVE SOLUTION
======================================================================

The Merchant API (/api/merchant/order) is fully functional and DOES return
payment details including card number and cardholder name:

Example response from Merchant API:
{
  "success": true,
  "data": {
    "order_id": "8c24bfdf-ad8a-420a-a289-3ffda4abc8cd",
    "amount": "2000",
    "currency": "rub",
    "payment_gateway_name": "Milly",
    "payment_detail": {
      "detail": "8600123456789012",
      "detail_type": "card",
      "initials": "qwerty"
    },
    "payment_link": "https://liberty.top/payment/...",
    "status": "pending",
    "expires_at": 1771065193
  }
}

The Merchant API provides:
- Card number (detail)
- Cardholder name (initials)
- Payment link
- Order status
- All necessary information for payment processing

======================================================================
RECOMMENDATION
======================================================================

OPTION 1: Request H2H API Access
Contact Liberty.top administrator to activate H2H API access for:
  Merchant ID: d5c17c6c-dc40-428a-80e5-2ca01af99f68
  Required endpoint: POST /api/h2h/order
  Reason: Need direct access to payment requisites without payment link

OPTION 2: Use Merchant API (Currently Working)
The Merchant API already provides all necessary payment details including
card numbers and cardholder names. This can be used immediately without
waiting for H2H API activation.

======================================================================
TECHNICAL DETAILS FOR SUPPORT
======================================================================

Merchant ID: d5c17c6c-dc40-428a-80e5-2ca01af99f68
Access Token: dtpf8uupsbhumevz4pz2jebrqzqmv62o (first 20 chars)
Base URL: https://liberty.top
Documentation: https://liberty.top/docs/1.0/overview

Working endpoints:
  - GET /api/currencies (200 OK)
  - GET /api/payment-gateways (200 OK)
  - POST /api/merchant/order (200 OK)

Not working endpoints:
  - POST /api/h2h/order (404 Not Found)

Request: Please activate H2H API access for the merchant account

======================================================================
