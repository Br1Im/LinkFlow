# Requests API –º–µ—Ç–æ–¥

üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API —Å–∞–π—Ç–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ (~5-10 —Å–µ–∫—É–Ω–¥)
- üí™ –ú–∏–Ω–∏–º—É–º —Ä–µ—Å—É—Ä—Å–æ–≤
- üéØ –ù–∞–¥—ë–∂–Ω–æ

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- –¢—Ä–µ–±—É–µ—Ç reverse engineering API
- –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–ø—á–µ–π
- –ù—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ü–µ—Ä–µ—Ö–≤–∞—Ç HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

–ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:

```bash
cd LinkFlow
python3 src/methods/requests_api/capture_requests.py
```

–°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä. –°–æ–∑–¥–∞–π –ø–ª–∞—Ç—ë–∂ –≤—Ä—É—á–Ω—É—é, –∞ —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –≤—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã.

### –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ API

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

```bash
python3 src/methods/requests_api/analyze_api.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –ö–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –ö–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω—É–∂–Ω—ã

### –®–∞–≥ 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–û—Ç–∫—Ä–æ–π `multitransfer_payment.py` –∏ —Ä–µ–∞–ª–∏–∑—É–π –º–µ—Ç–æ–¥ `create_payment()` –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞.

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```python
def create_payment(self, card_number, owner_name, amount):
    # –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
    response = self.session.post(
        f"{self.base_url}/api/v1/transfers/draft",
        json={
            "country": "uzbekistan",
            "amount": amount,
            "paymentSystem": "humo"
        }
    )
    transfer_id = response.json()['id']
    
    # –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    self.session.post(
        f"{self.base_url}/api/v1/transfers/{transfer_id}/recipient",
        json={
            "cardNumber": card_number,
            "firstName": owner_name.split()[0],
            "lastName": owner_name.split()[1]
        }
    )
    
    # –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python3 src/methods/requests_api/multitransfer_payment.py
```

## –§–∞–π–ª—ã

- `capture_requests.py` - –ø–µ—Ä–µ—Ö–≤–∞—Ç HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- `analyze_api.py` - –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- `multitransfer_payment.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ requests
- `captured_requests.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## TODO
- [x] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- [x] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ API
- [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å API multitransfer.ru
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ API
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] –†–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –∫–∞–ø—á–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
