# –°—Ç–∞—Ç—É—Å –ì–∏–±—Ä–∏–¥–Ω–æ–≥–æ –†–µ–∂–∏–º–∞

## –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ: –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–´–ô

–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (API + Selenium) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é.

## –ß—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Selenium** - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ–º cookies
2. **API –∑–∞–ø—Ä–æ—Å `formatReqId`** - —É—Å–ø–µ—à–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∞
3. **API –∑–∞–ø—Ä–æ—Å `logredirect`** - —É—Å–ø–µ—à–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç

## –ß—Ç–æ –ù–ï –†–∞–±–æ—Ç–∞–µ—Ç ‚ùå

**–§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ - –ø–æ–ª—É—á–µ–Ω–∏–µ QR –∫–æ–¥–∞ –∏ —Å—Å—ã–ª–∫–∏:**

- **POST –Ω–∞ `/SBP/default.aspx`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 405 (Method Not Allowed)
- **GET –Ω–∞ `/SBP/default.aspx` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏** - URL —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É
- **Selenium –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –¥–ª–∏–Ω–Ω—ã–º URL** - Chrome –∫—Ä–∞—à–∏—Ç—Å—è

## –ü—Ä–æ–±–ª–µ–º–∞

–ú—ã –Ω–µ –∑–Ω–∞–µ–º —Ç–æ—á–Ω—ã–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–º JavaScript –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–ª—É—á–∞–µ—Ç QR –∫–æ–¥ –∏ —Å—Å—ã–ª–∫—É –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `logredirect`. –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

1. –ï—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API endpoint, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ –Ω–∞—à–ª–∏
2. JavaScript –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ —Å —Ñ–æ—Ä–º–æ–π
3. –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ headers

## –¢–µ–∫—É—â–µ–µ –†–µ—à–µ–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SELENIUM —Ä–µ–∂–∏–º:**

- –°–∫–æ—Ä–æ—Å—Ç—å: ~3-5 —Å–µ–∫—É–Ω–¥ (—Å –ø—Ä–æ–≥—Ä–µ—Ç—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º)
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è
- –ú–µ—Ç–æ–¥: –ü–æ–ª–Ω—ã–π Selenium workflow

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SELENIUM —Ä–µ–∂–∏–º–∞:

1. ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
2. ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º –º–µ–∂–¥—É –ø–ª–∞—Ç–µ–∂–∞–º–∏
3. ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ (–ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å—É–º–º—É)
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ callback
5. ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

## –†–µ–∂–∏–º—ã –†–∞–±–æ—Ç—ã

### SELENIUM (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚úÖ
- –°–∫–æ—Ä–æ—Å—Ç—å: ~3-5 —Å–µ–∫—É–Ω–¥
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è
- –°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π

### HYBRID (–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π) ‚ö†Ô∏è
- –¶–µ–ª–µ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: ~1-2 —Å–µ–∫—É–Ω–¥—ã
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –°—Ç–∞—Ç—É—Å: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- Fallback: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ SELENIUM –ø–æ—Å–ª–µ 3 –æ—à–∏–±–æ–∫

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–µ–∂–∏–º–∞–º–∏

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ä–µ–∂–∏–º—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
- üìä –ê–¥–º–∏–Ω ‚Üí –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí –í—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–≤–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω—É–∂–Ω–æ:

1. **–ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Chrome DevTools –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞
2. **–ù–∞–π—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π endpoint** - –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—É–¥–∞ –∏ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
3. **–†–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ requests** - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ç–æ—á–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

- `capture_requests.py` - –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Selenium
- `find_payment_endpoint.py` - –∞–Ω–∞–ª–∏–∑ JavaScript –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `test_hybrid_mode.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SELENIUM —Ä–µ–∂–∏–º** - –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π, –±—ã—Å—Ç—Ä—ã–π (~3-5 —Å–µ–∫) –∏ –Ω–∞–¥–µ–∂–Ω—ã–π.

–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –Ω–æ –æ–Ω –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ SELENIUM –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.
