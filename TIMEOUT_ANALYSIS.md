# üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –¢–ê–ô–ú–ê–£–¢–ê 30 –°–ï–ö–£–ù–î

## üìä –°–¢–ê–¢–£–°: ‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–ê –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–î–∞—Ç–∞:** 13 —è–Ω–≤–∞—Ä—è 2026  
**–í—Ä–µ–º—è:** 14:28 UTC  
**–ó–∞–ø—Ä–æ—Å:** `{"amount": 1000, "orderId": "order-id-hash12295"}`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥  

---

## üö® –û–°–ù–û–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### ‚ùå Chrome Driver —Ç–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
**–°–∏–º–ø—Ç–æ–º—ã:**
- JavaScript –∫–ª–∏–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ: `‚úì JavaScript –∫–ª–∏–∫ #1 –≤—ã–ø–æ–ª–Ω–µ–Ω`
- –ù–æ —á–µ—Ä–µ–∑ 21 —Å–µ–∫—É–Ω–¥—É (40.8s - 19.8s) —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏: `Connection refused on localhost:45955`
- ChromeDriver —Å–µ—Å—Å–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π

### üìã –•–†–û–ù–û–õ–û–ì–ò–Ø –°–û–ë–´–¢–ò–ô

```
[19.6s] üöÄ –ù–∞–∂–∏–º–∞—é –∫–Ω–æ–ø–∫—É –û–ø–ª–∞—Ç–∏—Ç—å (—Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏)...
[19.8s] üîÑ –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è #1...
[19.8s] ‚úì JavaScript –∫–ª–∏–∫ #1 –≤—ã–ø–æ–ª–Ω–µ–Ω
[40.8s] ‚ö†Ô∏è –ö–ª–∏–∫ #1 –Ω–µ –¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, URL: https://1.elecsnet.ru/NotebookFront/services/0mhp/default.as
[40.9s] üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∫–ª–∏–∫–∞: /tmp/failed_click_1_1768303773.png
[41.4s] üîÑ –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è #2...
[41.5s] ‚úì JavaScript –∫–ª–∏–∫ #2 –≤—ã–ø–æ–ª–Ω–µ–Ω
[43.2s] ‚ö†Ô∏è –ö–ª–∏–∫ #2 –Ω–µ –¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
[43.2s] ‚ùå Connection refused - ChromeDriver –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–∂–¥—É 19.8s –∏ 40.8s (21 —Å–µ–∫—É–Ω–¥–∞) —Å–∏—Å—Ç–µ–º–∞ –∂–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ ChromeDriver "—É–º–∏—Ä–∞–µ—Ç"

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í

### 1. ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
```
[19.8s] ‚úì JavaScript –∫–ª–∏–∫ #1 –≤—ã–ø–æ–ª–Ω–µ–Ω
```
- –ö–Ω–æ–ø–∫–∞ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –Ω–∞–∂–∞—Ç–∞
- JavaScript –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. ‚ùå –ü–æ—Ç–µ—Ä—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å ChromeDriver
```
WARNING:urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError("HTTPConnection(host='localhost', port=45955): Failed to establish a new connection: [Errno 111] Connection refused")'
```
- ChromeDriver –Ω–∞ –ø–æ—Ä—Ç—É 45955 —Å—Ç–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### 3. üîÑ –ü–æ–ø—ã—Ç–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```
[41.4s] üîÑ –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è #2...
[43.2s] ‚ö†Ô∏è –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∏–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: HTTPConnectionPool Max retries exceeded
```
- –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–ª–∞—Å—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∫–ª–∏–∫
- –ù–æ ChromeDriver —É–∂–µ –±—ã–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

## üì∏ –ê–ù–ê–õ–ò–ó –°–ö–†–ò–ù–®–û–¢–ê

**–§–∞–π–ª:** `failed_click_latest.png` (107KB)  
**–í—Ä–µ–º—è:** 40.9s –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞  
**–°—Ç–∞—Ç—É—Å:** –°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–µ—Ä–µ–¥ –ø–æ—Ç–µ—Ä–µ–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç:**
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –º–æ–º–µ–Ω—Ç –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∫–ª–∏–∫–∞
- –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –±—ã–ª–∞ –ª–∏ –∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
- –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ó–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üîß –ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´

### 1. üêõ Chrome –ø—Ä–æ—Ü–µ—Å—Å "—É–º–∏—Ä–∞–µ—Ç" –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –ø–∞–º—è—Ç–∏ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- Chrome crash –∏–∑-–∑–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–∞–∂–µ —Å `--single-process`

### 2. ‚è±Ô∏è –î–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ elecsnet.ru
**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –°–∞–π—Ç elecsnet.ru –º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
- –ú–µ–∂–¥—É –∫–ª–∏–∫–æ–º –∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ SBP —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ö–æ–¥–∏—Ç >20 —Å–µ–∫—É–Ω–¥
- –°–∞–π—Ç –º–æ–∂–µ—Ç "–∑–∞–≤–∏—Å–∞—Ç—å" –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å—É–º–º—ã

### 3. üîå –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é –≤ Docker
**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ü—Ä–æ–±–ª–µ–º—ã —Å DNS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å elecsnet.ru
- –¢–∞–π–º–∞—É—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏

---

## üõ†Ô∏è –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. üöÄ –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

#### A. –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞–º—è—Ç—å –¥–ª—è Chrome
```dockerfile
# –í Dockerfile –¥–æ–±–∞–≤–∏—Ç—å
ENV CHROME_OPTS="--memory-pressure-off --max_old_space_size=4096"
```

#### B. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Chrome –ø—Ä–æ—Ü–µ—Å—Å–∞
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Chrome –∂–∏–≤ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
def check_chrome_alive(driver):
    try:
        driver.current_url
        return True
    except:
        return False
```

#### C. –°–æ–∫—Ä–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```python
# –í–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–Ω–∏—è 21 —Å–µ–∫—É–Ω–¥—É, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 2-3 —Å–µ–∫—É–Ω–¥—ã
for i in range(10):  # 10 –ø–æ–ø—ã—Ç–æ–∫ –ø–æ 3 —Å–µ–∫—É–Ω–¥—ã = 30 —Å–µ–∫
    time.sleep(3)
    if check_result():
        break
    if not check_chrome_alive(driver):
        restart_chrome()
```

### 2. üîß –°–†–ï–î–ù–ï-–°–†–û–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

#### A. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –æ–∂–∏–¥–∞–Ω–∏—é
```python
# –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –¥–æ–ª–≥–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è - –º–Ω–æ–≥–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
def wait_for_result_with_monitoring(driver, max_time=30):
    start = time.time()
    while time.time() - start < max_time:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º Chrome –∂–∏–≤
        if not check_chrome_alive(driver):
            raise Exception("Chrome died during processing")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if check_payment_result(driver):
            return True
            
        time.sleep(2)  # –ö–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
    return False
```

#### B. –†–µ–∑–µ—Ä–≤–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
```python
# –î–µ—Ä–∂–∞—Ç—å –≤—Ç–æ—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä –≤ —Ä–µ–∑–µ—Ä–≤–µ
backup_browser = create_backup_browser()
if main_browser_fails:
    switch_to_backup_browser()
```

### 3. üèóÔ∏è –î–û–õ–ì–û-–°–†–û–ß–ù–´–ï –†–ï–®–ï–ù–ò–Ø

#### A. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Firefox –≤–º–µ—Å—Ç–æ Chrome
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Playwright –≤–º–µ—Å—Ç–æ Selenium

#### B. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üß™ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### 1. –¢–µ—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ Chrome
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å 10 –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ–¥—Ä—è–¥
for i in {1..10}; do
    curl -X POST "http://85.192.56.74:5001/api/payment" \
      -H "Authorization: Bearer -3uVLlbWyy90eapOGkv70C2ZltaYTxq-HtDbq-DtlLo" \
      -H "Content-Type: application/json" \
      -d "{\"amount\": 1000, \"orderId\": \"test-$i\"}"
    sleep 60
done
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Å—É—Ä—Å—ã
docker stats linkflow-payment-prod
```

### 3. –ê–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
```bash
# –°–æ–±—Ä–∞—Ç—å –≤—Å–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –Ω–µ—É–¥–∞—á
ls -la /tmp/*click* /tmp/*waiting* /tmp/*failure*
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –î–õ–Ø –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø

1. **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ Chrome –ø—Ä–æ—Ü–µ—Å—Å–∞** - –¥–æ–ª–∂–µ–Ω –∂–∏—Ç—å >30 —Å–µ–∫—É–Ω–¥
2. **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ elecsnet.ru** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <15 —Å–µ–∫—É–Ω–¥  
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** - –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å –ª–∏–º–∏—Ç—ã
4. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Connection refused** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0
5. **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >90%

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Chrome
2. **–°–µ–≥–æ–¥–Ω—è:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é
3. **–ó–∞–≤—Ç—Ä–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
4. **–ù–∞ –Ω–µ–¥–µ–ª–µ:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Chrome

**–¶–µ–ª—å:** –î–æ—Å—Ç–∏—á—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ >95% –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 30 —Å–µ–∫—É–Ω–¥